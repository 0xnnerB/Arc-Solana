<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>USDC Bridge - Circle Bridge Kit</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'><circle cx='16' cy='16' r='16' fill='%232775CA'/></svg>">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&family=IBM+Plex+Mono:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    :root {
      --bg-dark: #050508;
      --bg-card: #0c0c12;
      --bg-input: #12121a;
      --border: #1e1e2e;
      --border-hover: #2d2d42;
      --text: #ffffff;
      --text-dim: #6b6b80;
      --accent: #00d4ff;
      --accent-2: #0052FF;
      --success: #00ff88;
      --error: #ff4466;
      --warning: #ffaa00;
      --gradient: linear-gradient(135deg, #00d4ff 0%, #0052FF 50%, #00ff88 100%);
    }
    
    body {
      min-height: 100vh;
      background: var(--bg-dark);
      font-family: 'Outfit', sans-serif;
      color: var(--text);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 2rem;
      padding-top: 6rem;
      position: relative;
      overflow-x: hidden;
    }
    
    body::before {
      content: '';
      position: fixed;
      top: -50%; left: -50%;
      width: 200%; height: 200%;
      background: 
        radial-gradient(circle at 20% 20%, rgba(0, 212, 255, 0.08) 0%, transparent 40%),
        radial-gradient(circle at 80% 80%, rgba(0, 82, 255, 0.08) 0%, transparent 40%),
        radial-gradient(circle at 50% 50%, rgba(0, 255, 136, 0.03) 0%, transparent 50%);
      animation: bgMove 20s ease-in-out infinite;
      z-index: -2;
    }
    
    @keyframes bgMove {
      0%, 100% { transform: translate(0, 0) rotate(0deg); }
      33% { transform: translate(2%, -2%) rotate(1deg); }
      66% { transform: translate(-1%, 1%) rotate(-1deg); }
    }
    
    .particles { position: fixed; inset: 0; pointer-events: none; z-index: -1; }
    .particle {
      position: absolute;
      background: var(--accent);
      border-radius: 50%;
      opacity: 0.2;
      animation: particleFloat 8s ease-in-out infinite;
    }
    @keyframes particleFloat {
      0%, 100% { transform: translateY(0) scale(1); opacity: 0.15; }
      50% { transform: translateY(-30px) scale(1.3); opacity: 0.35; }
    }
    
    .header {
      position: fixed;
      top: 0; left: 0; right: 0;
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: rgba(5, 5, 8, 0.9);
      backdrop-filter: blur(20px);
      border-bottom: 1px solid var(--border);
      z-index: 100;
    }
    
    .logo {
      display: flex;
      align-items: center;
      gap: 12px;
      font-weight: 700;
      font-size: 1.3rem;
    }
    
    .logo-icon {
      width: 40px; height: 40px;
      background: var(--gradient);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.3rem;
    }
    
    .wallet-btn {
      padding: 0.75rem 1.5rem;
      background: var(--bg-input);
      border: 1px solid var(--border);
      border-radius: 12px;
      color: var(--text);
      font-family: inherit;
      font-weight: 600;
      font-size: 0.95rem;
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .wallet-btn:hover {
      border-color: var(--accent);
      background: rgba(0, 212, 255, 0.1);
    }
    
    .wallet-btn.connected {
      background: rgba(0, 255, 136, 0.1);
      border-color: rgba(0, 255, 136, 0.3);
    }
    
    .wallet-dot {
      width: 10px; height: 10px;
      background: var(--success);
      border-radius: 50%;
      animation: pulse 2s ease-in-out infinite;
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.5; transform: scale(1.2); }
    }
    
    .bridge-card {
      width: 100%;
      max-width: 480px;
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 28px;
      overflow: hidden;
      box-shadow: 
        0 0 0 1px rgba(255,255,255,0.03),
        0 30px 80px rgba(0,0,0,0.6),
        0 0 150px rgba(0, 212, 255, 0.08);
    }
    
    .card-header {
      padding: 1.5rem 1.75rem;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: rgba(255,255,255,0.01);
    }
    
    .card-title {
      font-size: 1.35rem;
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .usdc-icon { width: 32px; height: 32px; }
    
    .testnet-badge {
      padding: 6px 14px;
      background: rgba(255, 170, 0, 0.12);
      border: 1px solid rgba(255, 170, 0, 0.25);
      border-radius: 8px;
      font-size: 0.7rem;
      font-weight: 700;
      color: var(--warning);
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    
    .card-body { padding: 1.75rem; }
    
    .form-group {
      margin-bottom: 1.25rem;
      position: relative;
    }
    
    .form-group label {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 0.8rem;
      color: var(--text-dim);
      margin-bottom: 10px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.8px;
    }
    
    .balance-text {
      color: var(--text);
      font-family: 'IBM Plex Mono', monospace;
      text-transform: none;
      letter-spacing: 0;
      font-weight: 500;
    }
    
    .select-wrap { position: relative; }
    
    .network-select {
      width: 100%;
      padding: 1.1rem 1.25rem;
      padding-right: 3rem;
      background: var(--bg-input);
      border: 1px solid var(--border);
      border-radius: 16px;
      color: var(--text);
      font-family: inherit;
      font-size: 1.05rem;
      font-weight: 500;
      cursor: pointer;
      appearance: none;
      transition: all 0.3s;
    }
    
    .network-select:hover { border-color: var(--border-hover); }
    .network-select:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 4px rgba(0, 212, 255, 0.1);
    }
    .network-select:disabled { opacity: 0.5; cursor: not-allowed; }
    
    .select-arrow {
      position: absolute;
      right: 18px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--text-dim);
      pointer-events: none;
      font-size: 0.9rem;
    }
    
    .swap-row {
      display: flex;
      justify-content: center;
      margin: -6px 0 10px;
      position: relative;
      z-index: 10;
    }
    
    .swap-btn {
      width: 48px; height: 48px;
      background: var(--bg-dark);
      border: 2px solid var(--border);
      border-radius: 14px;
      color: var(--text-dim);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      font-size: 1.2rem;
    }
    
    .swap-btn:hover {
      border-color: var(--accent);
      color: var(--accent);
      transform: rotate(180deg);
      background: rgba(0, 212, 255, 0.05);
    }
    .swap-btn:disabled { opacity: 0.4; cursor: not-allowed; transform: none; }
    
    .amount-wrap {
      position: relative;
      display: flex;
      align-items: center;
    }
    
    .amount-input {
      width: 100%;
      padding: 1.25rem;
      padding-right: 120px;
      background: var(--bg-input);
      border: 1px solid var(--border);
      border-radius: 16px;
      color: var(--text);
      font-family: 'IBM Plex Mono', monospace;
      font-size: 1.6rem;
      font-weight: 600;
      outline: none;
      transition: all 0.3s;
    }
    
    .amount-input:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 4px rgba(0, 212, 255, 0.1);
    }
    .amount-input::placeholder { color: var(--text-dim); font-weight: 400; }
    .amount-input:disabled { opacity: 0.5; cursor: not-allowed; }
    
    .max-btn {
      position: absolute;
      right: 95px;
      padding: 8px 12px;
      background: rgba(0, 212, 255, 0.12);
      border: none;
      border-radius: 8px;
      color: var(--accent);
      font-family: inherit;
      font-size: 0.75rem;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.2s;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    .max-btn:hover { background: rgba(0, 212, 255, 0.25); }
    .max-btn:disabled { opacity: 0.4; cursor: not-allowed; }
    
    .usdc-badge {
      position: absolute;
      right: 16px;
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 10px 14px;
      background: var(--accent-2);
      border-radius: 10px;
      font-size: 0.9rem;
      font-weight: 700;
    }
    
    .progress-section {
      padding: 1.5rem;
      background: rgba(0, 212, 255, 0.04);
      border: 1px solid rgba(0, 212, 255, 0.1);
      border-radius: 18px;
      margin-bottom: 1.25rem;
      animation: fadeIn 0.4s ease-out;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .progress-bar {
      height: 6px;
      background: var(--bg-input);
      border-radius: 3px;
      overflow: hidden;
      margin-bottom: 1.5rem;
    }
    
    .progress-fill {
      height: 100%;
      background: var(--gradient);
      border-radius: 3px;
      transition: width 0.6s ease-out;
    }
    
    .progress-steps { display: flex; justify-content: space-between; }
    
    .step {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
    }
    
    .step-dot {
      width: 36px; height: 36px;
      background: var(--bg-input);
      border: 2px solid var(--border);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.85rem;
      font-weight: 700;
      transition: all 0.3s;
    }
    
    .step.active .step-dot {
      border-color: var(--accent);
      background: rgba(0, 212, 255, 0.2);
      color: var(--accent);
      animation: stepPulse 1.2s ease-in-out infinite;
    }
    
    .step.done .step-dot {
      background: var(--success);
      border-color: var(--success);
      color: var(--bg-dark);
    }
    
    @keyframes stepPulse {
      0%, 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(0, 212, 255, 0.5); }
      50% { transform: scale(1.08); box-shadow: 0 0 0 10px rgba(0, 212, 255, 0); }
    }
    
    .step-label {
      font-size: 0.72rem;
      color: var(--text-dim);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      font-weight: 600;
    }
    .step.active .step-label, .step.done .step-label { color: var(--text); }
    
    .success-section {
      text-align: center;
      padding: 2.5rem 1.5rem;
      animation: fadeIn 0.5s ease-out;
    }
    
    .success-icon {
      width: 90px; height: 90px;
      background: var(--success);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 3rem;
      margin: 0 auto 1.75rem;
      animation: successPop 0.6s ease-out;
      box-shadow: 0 0 60px rgba(0, 255, 136, 0.3);
    }
    
    @keyframes successPop {
      0% { transform: scale(0) rotate(-180deg); }
      50% { transform: scale(1.2) rotate(10deg); }
      100% { transform: scale(1) rotate(0); }
    }
    
    .success-section h3 {
      font-size: 1.6rem;
      font-weight: 700;
      color: var(--success);
      margin-bottom: 0.75rem;
    }
    
    .success-section p {
      color: var(--text-dim);
      font-size: 1.05rem;
      margin-bottom: 1.75rem;
    }
    
    .tx-link {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      color: var(--accent);
      font-family: 'IBM Plex Mono', monospace;
      font-size: 0.9rem;
      text-decoration: none;
      padding: 12px 20px;
      background: rgba(0, 212, 255, 0.1);
      border: 1px solid rgba(0, 212, 255, 0.2);
      border-radius: 12px;
      transition: all 0.3s;
      margin-bottom: 1.5rem;
    }
    .tx-link:hover { background: rgba(0, 212, 255, 0.2); transform: translateY(-2px); }
    
    .error-msg {
      padding: 1.25rem;
      background: rgba(255, 68, 102, 0.08);
      border: 1px solid rgba(255, 68, 102, 0.2);
      border-radius: 14px;
      color: var(--error);
      font-size: 0.95rem;
      text-align: center;
      margin-bottom: 1.25rem;
      animation: shake 0.5s ease-out;
    }
    
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      20%, 60% { transform: translateX(-6px); }
      40%, 80% { transform: translateX(6px); }
    }
    
    .main-btn {
      width: 100%;
      padding: 1.35rem;
      background: var(--gradient);
      border: none;
      border-radius: 16px;
      color: var(--bg-dark);
      font-family: inherit;
      font-size: 1.15rem;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
    }
    
    .main-btn:hover:not(:disabled) {
      transform: translateY(-3px);
      box-shadow: 0 15px 50px rgba(0, 212, 255, 0.4);
    }
    .main-btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
    
    .main-btn.secondary {
      background: var(--bg-input);
      border: 2px solid var(--border);
      color: var(--text);
    }
    .main-btn.secondary:hover:not(:disabled) { border-color: var(--accent); box-shadow: none; }
    
    .spinner {
      width: 22px; height: 22px;
      border: 3px solid rgba(0,0,0,0.15);
      border-top-color: var(--bg-dark);
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }
    
    .connect-prompt { text-align: center; padding: 3.5rem 1.5rem; }
    .connect-prompt .icon {
      font-size: 5rem;
      margin-bottom: 1.25rem;
      opacity: 0.7;
      animation: float 3s ease-in-out infinite;
    }
    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }
    .connect-prompt h3 { font-size: 1.4rem; margin-bottom: 0.75rem; font-weight: 700; }
    .connect-prompt p { color: var(--text-dim); margin-bottom: 2rem; line-height: 1.6; font-size: 1rem; }
    
    .card-footer {
      padding: 1.25rem 1.75rem;
      border-top: 1px solid var(--border);
      display: flex;
      justify-content: space-between;
      font-size: 0.85rem;
      color: var(--text-dim);
      background: rgba(0,0,0,0.2);
    }
    .card-footer a { color: var(--accent); text-decoration: none; font-weight: 500; }
    .card-footer a:hover { opacity: 0.8; }
    
    .demo-notice {
      position: fixed;
      bottom: 1.5rem;
      left: 50%;
      transform: translateX(-50%);
      padding: 12px 24px;
      background: var(--bg-card);
      border: 1px solid var(--warning);
      border-radius: 12px;
      font-size: 0.85rem;
      color: var(--warning);
      display: flex;
      align-items: center;
      gap: 10px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.4);
      z-index: 50;
    }
    
    @media (max-width: 520px) {
      body { padding: 1rem; padding-top: 5.5rem; }
      .header { padding: 1rem 1.25rem; }
      .logo span { display: none; }
      .bridge-card { border-radius: 24px; }
      .card-body { padding: 1.5rem; }
      .amount-input { font-size: 1.3rem; padding-right: 110px; }
      .max-btn { right: 85px; }
      .demo-notice { left: 1rem; right: 1rem; transform: none; text-align: center; justify-content: center; }
    }
  </style>
</head>
<body>
  <div class="particles" id="particles"></div>

  <header class="header">
    <div class="logo">
      <div class="logo-icon">üåâ</div>
      <span>USDC Bridge</span>
    </div>
    <button class="wallet-btn" id="walletBtn">Conectar Carteira</button>
  </header>

  <div class="bridge-card">
    <div class="card-header">
      <div class="card-title">
        <svg class="usdc-icon" viewBox="0 0 32 32" fill="none">
          <circle cx="16" cy="16" r="16" fill="#2775CA"/>
          <path d="M20.5 18.5c0-2.1-1.3-2.8-3.8-3.1-1.8-.3-2.2-.7-2.2-1.5 0-.8.6-1.3 1.8-1.3 1.1 0 1.7.4 2 1.2h2c-.3-1.7-1.5-2.7-3.2-3v-1.5h-1.8v1.5c-1.8.3-3 1.5-3 3.2 0 2 1.2 2.8 3.7 3.1 1.9.3 2.3.8 2.3 1.6 0 .9-.7 1.5-2 1.5-1.4 0-2-.6-2.3-1.5h-2c.3 1.8 1.5 2.9 3.5 3.2v1.5h1.8V21c1.9-.3 3.2-1.5 3.2-3.5z" fill="white"/>
        </svg>
        Bridge USDC
      </div>
      <span class="testnet-badge">Testnet</span>
    </div>
    <div class="card-body" id="cardBody"></div>
    <div class="card-footer">
      <span id="networkStatus">Rede: --</span>
      <a href="https://developers.circle.com/bridge-kit" target="_blank">Docs ‚Üó</a>
    </div>
  </div>

  <div class="demo-notice">‚ö†Ô∏è Modo Demo - Para produ√ß√£o, conecte ao backend</div>

  <script>
    const NETWORKS = {
      "base-sepolia": { name: "üîµ Base Sepolia", chainId: "0x14a34", explorer: "https://sepolia.basescan.org", usdc: "0x036CbD53842c5426634e7929541eC2318f3dCF7e" },
      "ethereum-sepolia": { name: "‚ü† Ethereum Sepolia", chainId: "0xaa36a7", explorer: "https://sepolia.etherscan.io", usdc: "0x1c7D4B196Cb0C7B01d743Fbc6116a902379C7238" },
      "arbitrum-sepolia": { name: "üî∑ Arbitrum Sepolia", chainId: "0x66eee", explorer: "https://sepolia.arbiscan.io", usdc: "0x75faf114eafb1BDbe2F0316DF893fd58CE46AA4d" },
      "optimism-sepolia": { name: "üî¥ Optimism Sepolia", chainId: "0xaa37dc", explorer: "https://sepolia-optimism.etherscan.io", usdc: "0x5fd84259d66Cd46123540766Be93DFE6D43130D7" },
      "polygon-amoy": { name: "‚¨° Polygon Amoy", chainId: "0x13882", explorer: "https://amoy.polygonscan.com", usdc: "0x41E94Eb019C0762f9Bfcf9Fb1E58725BfB0e7582" },
      "avalanche-fuji": { name: "üî∫ Avalanche Fuji", chainId: "0xa869", explorer: "https://testnet.snowtrace.io", usdc: "0x5425890298aed601595a70AB815c96711a31Bc65" }
    };

    let state = { wallet: null, balance: "0.00", fromChain: "base-sepolia", toChain: "ethereum-sepolia", amount: "", status: "idle", currentStep: 0, error: "", txHash: "" };

    function createParticles() {
      const c = document.getElementById("particles");
      for (let i = 0; i < 30; i++) {
        const p = document.createElement("div");
        p.className = "particle";
        p.style.left = Math.random() * 100 + "%";
        p.style.top = Math.random() * 100 + "%";
        const s = 2 + Math.random() * 5;
        p.style.width = s + "px"; p.style.height = s + "px";
        p.style.animationDelay = Math.random() * 8 + "s";
        p.style.animationDuration = (5 + Math.random() * 7) + "s";
        c.appendChild(p);
      }
    }

    async function connectWallet() {
      if (typeof window.ethereum === "undefined") { alert("MetaMask n√£o encontrado!\n\nInstale: https://metamask.io"); return; }
      try {
        const accounts = await window.ethereum.request({ method: "eth_requestAccounts" });
        state.wallet = accounts[0];
        await fetchBalance();
        updateWalletBtn();
        render();
      } catch (e) { alert("Erro: " + e.message); }
    }

    function updateWalletBtn() {
      const btn = document.getElementById("walletBtn");
      if (state.wallet) {
        btn.className = "wallet-btn connected";
        btn.innerHTML = '<span class="wallet-dot"></span>' + state.wallet.slice(0,6) + "..." + state.wallet.slice(-4);
      }
    }

    async function fetchBalance() {
      if (!state.wallet) return;
      const net = NETWORKS[state.fromChain];
      try {
        const data = "0x70a08231000000000000000000000000" + state.wallet.slice(2);
        const result = await window.ethereum.request({ method: "eth_call", params: [{ to: net.usdc, data }, "latest"] });
        state.balance = (parseInt(result, 16) / 1e6).toFixed(2);
      } catch { state.balance = "0.00"; }
    }

    function swapNetworks() { const t = state.fromChain; state.fromChain = state.toChain; state.toChain = t; fetchBalance().then(render); }
    function useMax() { state.amount = state.balance; render(); }
    function updateAmount(v) { state.amount = v; }
    function updateFromChain(v) { state.fromChain = v; if (v === state.toChain) state.toChain = Object.keys(NETWORKS).find(c => c !== v); fetchBalance().then(render); }
    function updateToChain(v) { state.toChain = v; if (v === state.fromChain) { state.fromChain = Object.keys(NETWORKS).find(c => c !== v); fetchBalance().then(render); } else render(); }

    async function executeBridge() {
      if (!state.amount || parseFloat(state.amount) <= 0 || parseFloat(state.amount) > parseFloat(state.balance)) { alert("Quantidade inv√°lida ou saldo insuficiente"); return; }
      state.status = "processing"; state.currentStep = 1; state.error = ""; render();
      try {
        await new Promise(r => setTimeout(r, 2000)); state.currentStep = 2; render();
        await new Promise(r => setTimeout(r, 2500)); state.currentStep = 3; render();
        await new Promise(r => setTimeout(r, 2000));
        state.status = "success"; state.txHash = "0x" + [...Array(64)].map(() => "0123456789abcdef"[Math.floor(Math.random()*16)]).join(""); render();
      } catch (e) { state.status = "error"; state.error = e.message; render(); }
    }

    function resetBridge() { state.status = "idle"; state.currentStep = 0; state.amount = ""; state.error = ""; state.txHash = ""; fetchBalance().then(render); }

    function render() {
      const c = document.getElementById("cardBody");
      const fromNet = NETWORKS[state.fromChain], toNet = NETWORKS[state.toChain];
      document.getElementById("networkStatus").textContent = "Rede: " + (fromNet ? fromNet.name.replace(/^[^\s]+\s/, '') : "--");

      if (!state.wallet) {
        c.innerHTML = '<div class="connect-prompt"><div class="icon">üëõ</div><h3>Conecte sua Carteira</h3><p>Conecte sua MetaMask para transferir USDC entre redes testnet.</p><button class="main-btn" onclick="connectWallet()">Conectar MetaMask</button></div>';
        return;
      }

      if (state.status === "success") {
        c.innerHTML = '<div class="success-section"><div class="success-icon">‚úì</div><h3>Transfer√™ncia Conclu√≠da!</h3><p>' + state.amount + ' USDC de ' + fromNet.name.replace(/^[^\s]+\s/, '') + ' para ' + toNet.name.replace(/^[^\s]+\s/, '') + '</p><a class="tx-link" href="' + toNet.explorer + '/tx/' + state.txHash + '" target="_blank">Ver no Explorer ‚Üó</a><button class="main-btn secondary" onclick="resetBridge()">Nova Transfer√™ncia</button></div>';
        return;
      }

      const opts = Object.entries(NETWORKS).map(([id, n]) => '<option value="' + id + '"' + (id === state.fromChain ? ' selected' : '') + '>' + n.name + '</option>').join("");
      const optsTo = Object.entries(NETWORKS).map(([id, n]) => '<option value="' + id + '"' + (id === state.toChain ? ' selected' : '') + '>' + n.name + '</option>').join("");
      const proc = state.status === "processing";
      const canBridge = state.amount && parseFloat(state.amount) > 0 && parseFloat(state.amount) <= parseFloat(state.balance);

      let progress = '';
      if (proc) {
        progress = '<div class="progress-section"><div class="progress-bar"><div class="progress-fill" style="width:' + (state.currentStep/3*100) + '%"></div></div><div class="progress-steps">' +
          '<div class="step ' + (state.currentStep >= 1 ? (state.currentStep > 1 ? 'done' : 'active') : '') + '"><div class="step-dot">' + (state.currentStep > 1 ? '‚úì' : '1') + '</div><span class="step-label">Aprovar</span></div>' +
          '<div class="step ' + (state.currentStep >= 2 ? (state.currentStep > 2 ? 'done' : 'active') : '') + '"><div class="step-dot">' + (state.currentStep > 2 ? '‚úì' : '2') + '</div><span class="step-label">Burn</span></div>' +
          '<div class="step ' + (state.currentStep >= 3 ? 'active' : '') + '"><div class="step-dot">3</div><span class="step-label">Mint</span></div></div></div>';
      }

      c.innerHTML = 
        '<div class="form-group"><label>De (Origem)</label><div class="select-wrap"><select class="network-select" onchange="updateFromChain(this.value)"' + (proc ? ' disabled' : '') + '>' + opts + '</select><span class="select-arrow">‚ñº</span></div></div>' +
        '<div class="swap-row"><button class="swap-btn" onclick="swapNetworks()"' + (proc ? ' disabled' : '') + '>‚áÖ</button></div>' +
        '<div class="form-group"><label>Para (Destino)</label><div class="select-wrap"><select class="network-select" onchange="updateToChain(this.value)"' + (proc ? ' disabled' : '') + '>' + optsTo + '</select><span class="select-arrow">‚ñº</span></div></div>' +
        '<div class="form-group"><label><span>Quantidade</span><span class="balance-text">Saldo: ' + state.balance + ' USDC</span></label><div class="amount-wrap"><input type="number" class="amount-input" placeholder="0.00" value="' + state.amount + '" oninput="updateAmount(this.value)"' + (proc ? ' disabled' : '') + '><button class="max-btn" onclick="useMax()"' + (proc ? ' disabled' : '') + '>MAX</button><div class="usdc-badge">USDC</div></div></div>' +
        progress +
        (state.error ? '<div class="error-msg">' + state.error + '</div>' : '') +
        '<button class="main-btn" onclick="executeBridge()"' + (proc || !canBridge ? ' disabled' : '') + '>' + (proc ? '<span class="spinner"></span>Processando...' : 'Bridge USDC') + '</button>';
    }

    createParticles();
    document.getElementById("walletBtn").onclick = connectWallet;
    render();

    if (typeof window.ethereum !== "undefined") {
      window.ethereum.on("accountsChanged", a => { state.wallet = a[0] || null; state.balance = "0.00"; fetchBalance().then(render); updateWalletBtn(); });
      window.ethereum.on("chainChanged", () => fetchBalance().then(render));
    }
  </script>
</body>
</html>
